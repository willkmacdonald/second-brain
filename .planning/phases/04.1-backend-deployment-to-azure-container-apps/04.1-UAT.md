---
status: testing
phase: 04.1-backend-deployment-to-azure-container-apps
source: [04.1-01-SUMMARY.md, 04.1-02-SUMMARY.md]
started: 2026-02-23T21:50:00Z
updated: 2026-02-23T21:50:00Z
---

## Current Test

number: 1
name: Health Endpoint on Custom Domain
expected: |
  Visiting https://brain.willmacdonald.com/health in a browser (or curl) returns {"status":"ok"} over HTTPS with a valid TLS certificate.
awaiting: user response

## Tests

### 1. Health Endpoint on Custom Domain
expected: Visiting https://brain.willmacdonald.com/health in a browser (or curl) returns {"status":"ok"} over HTTPS with a valid TLS certificate.
result: [pending]

### 2. API Docs Accessible
expected: Visiting https://brain.willmacdonald.com/docs shows the FastAPI Swagger UI with all endpoints listed (AG-UI, inbox, health).
result: [pending]

### 3. Container Starts Without Errors
expected: The Container App logs (Azure Portal -> Container App -> Log stream, or `az containerapp logs show`) show uvicorn starting on port 8000 with no crash loops. Warnings about Key Vault or Cosmos DB being unavailable are expected and OK.
result: [pending]

### 4. Key Vault Access via Managed Identity
expected: After the container cold-starts, the logs show successful Key Vault secret fetch (no "Key Vault not available" warning). The API key middleware is active â€” a request without an API key to a protected endpoint returns 401.
result: [pending]

### 5. CI/CD Pipeline Trigger
expected: Pushing a trivial backend change to main (e.g., a comment in a Python file) triggers the "Deploy Backend to Azure Container Apps" GitHub Actions workflow. The workflow completes green with all steps passing (checkout, Azure login, ACR login, build+push, deploy).
result: [pending]

### 6. CI/CD Deploys New Revision
expected: After the GitHub Actions workflow completes, the Container App shows a new revision in Azure Portal (or via `az containerapp revision list`). The new revision is running and the /health endpoint still returns 200.
result: [pending]

## Summary

total: 6
passed: 0
issues: 0
pending: 6
skipped: 0

## Gaps

[none yet]
