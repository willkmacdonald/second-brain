---
phase: 09-hitl-parity-and-observability
plan: 06
type: execute
wave: 2
depends_on: [09-04, 09-05]
files_modified: []
autonomous: false
requirements: [HITL-03]
gap_closure: true

must_haves:
  truths:
    - "Classifier correctly distinguishes between misunderstood (nonsensical) and pending (ambiguous but classifiable)"
    - "Follow-up reclassification routes action-oriented clarifications to Projects"
    - "Agent instructions in Foundry portal are updated with examples"
  artifacts: []
  key_links: []
---

<objective>
Update Foundry classifier agent instructions to properly distinguish misunderstood vs pending and to weight action-oriented follow-up language toward the Projects bucket.

Purpose: UAT revealed two instruction-level issues: (1) Ambiguous but classifiable text triggers misunderstood instead of pending/low-confidence, because the agent instructions don't clearly define the boundary. (2) Follow-up clarifications containing action verbs ("I need to build/do/make/schedule...") get filed to Ideas instead of Projects, because the instructions don't weight follow-up context.

Output: Updated agent instructions in Foundry portal.
</objective>

<execution_context>
@/Users/willmacdonald/.claude/get-shit-done/workflows/execute-plan.md
@/Users/willmacdonald/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/09-hitl-parity-and-observability/09-UAT.md
</context>

<tasks>

<task type="checkpoint:human-action" gate="blocking">
  <name>Task 1: Update classifier agent instructions in AI Foundry portal</name>
  <action>
    The classifier agent (ID: `asst_Fnjkq5RVrvdFIOSqbreAwxuq`) needs instruction updates in the AI Foundry portal. Claude cannot access the portal -- this is a manual step.

    Navigate to AI Foundry portal > Agent > asst_Fnjkq5RVrvdFIOSqbreAwxuq > Instructions.

    Add or update the following sections in the agent instructions:

    **1. Misunderstood vs Pending boundary (add to classification rules section):**

    ```
    ## Status Decision Rules

    Use status="misunderstood" ONLY when:
    - The text is genuinely nonsensical, garbled, or contains no meaningful words
    - You cannot determine ANY possible bucket even with low confidence
    - Examples: "asdf jkl", "one two six seven", random characters, single word with no context

    Use status="pending" (NOT misunderstood) when:
    - The text is vague or ambiguous but you CAN assign a bucket with some confidence
    - You have a best guess but are not confident (< 0.6)
    - The text is a real sentence/phrase but could fit multiple buckets
    - Examples: "thing about the place", "remember that stuff", "the meeting", "call someone"

    Key distinction: If you can pick a bucket at all (even with 0.3 confidence), use pending. Only use misunderstood if you truly cannot classify.
    ```

    **2. Follow-up context weighting (add after the bucket definitions section):**

    ```
    ## Follow-up Classification Context

    When the user provides follow-up context after a misunderstood classification:
    - The follow-up text is the MOST IMPORTANT signal -- it provides the missing context
    - Weight action-oriented language heavily toward Projects:
      - "I need to build/create/make/do/schedule/fix/implement/deploy/ship..." -> Projects
      - "I should reach out to/call/email/meet with [person]..." -> People
      - "I was thinking about/what if/imagine/concept..." -> Ideas
      - "I need to pay/book/register/renew/cancel..." -> Admin
    - The follow-up should OVERRIDE the initial ambiguity, not be averaged with it
    - Confidence should reflect your certainty about the follow-up context, not the original text

    Examples:
    - Original: "one two six seven" -> misunderstood
    - Follow-up: "I need to build a deck for a customer" -> Projects (0.85)
    - Follow-up: "It's a phone number for John" -> People (0.80)
    - Follow-up: "Just random words, ignore it" -> still misunderstood
    ```
  </action>
  <resume-signal>Type "done" after updating the agent instructions in the Foundry portal, or paste the updated instruction text for verification.</resume-signal>
</task>

</tasks>

<verification>
- User confirms instructions updated in Foundry portal
- Test: Send "thing about the place" -- should get LOW_CONFIDENCE (pending), not misunderstood
- Test: Send nonsense like "asdf jkl" -- should still get misunderstood
- Test: After misunderstood, reply "I need to build a presentation" -- should classify as Projects
</verification>

<success_criteria>
1. Agent instructions in Foundry portal include misunderstood vs pending decision rules
2. Agent instructions include follow-up context weighting examples
3. Ambiguous-but-classifiable text triggers pending (LOW_CONFIDENCE event) not misunderstood
4. Action-oriented follow-up clarifications route to Projects bucket
</success_criteria>

<output>
After completion, create `.planning/phases/09-hitl-parity-and-observability/09-06-SUMMARY.md`
</output>
